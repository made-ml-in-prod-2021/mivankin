Первое ДЗ
==============================

Домашнее задание по дисциплине "Машинное обучение в продакшене"

Что реализовано
------------
    - Модульный проект на основе CookieCutter
    - Тесты для проекта
    - Ноутбук с EDA
    - Отчет на основе pandas_proffiling
    - Максимально возможный набор критериев, чтобы выбить побольше баллов :P

<p><small>Project based on the <a target="_blank" href="https://drivendata.github.io/cookiecutter-data-science/">cookiecutter data science project template</a>. #cookiecutterdatascience</small></p>

Как устанавливать и запускать
------------
    python setup.py install
    set pythonpath=\path\to\...\src\;%pythonapth%
    
    pytest --cov -v . test_fake_data.py
    python src/ml_in_prod1.py
    Файл для конфигурации /configs/train_config.yaml
    
Как просмотреть отчет
------------
    Для удобства можно установить Run Selected HTML из магазина Google Chrome.
    Далее:
     1) Заходим ../reports/heart_disease_uci.html
     2) Нажимаем view raw,
     3) Выделяем весь код ctrl+a, жмем правую кнопку мыши и выбираем RUN Selected HTML
     4) PROFIT!
    
    
<p><small>Установить можно отсюда <a target="_blank" href="https://chrome.google.com/webstore/detail/run-selected-html/eefflcdphpehljcadbmkdpopmbamfefl/related">Run Selected HTML</a></small></p>

Где находится ноутбук
------------
    ../notebooks/ml_in_prod.ipynb
    
Где и как делать предсказания
------------
    Запуск модели основан на yaml конфигурации ../configs/train_config.yaml
    Для запуска предсказаний на ваших данных необходимо:
     1) Указать путь в поле predict_path
     2) Изменить поле на eval: True

Что по логам
------------
    Hydra обеспечивает вывод логов в консоль и вы ничего не упустите.
    Тем не менее дополнительно логи хранятся в:
     1) ../src/outputs/logs/heart_dissease_uci.info - Логи уровня INFO
     2) ../src/outputs/logs/heart_dissease_uci.log - Логи уровня ERROR

Самооценка
------------
Все поставленные задачи были выполнены, в целом результатом своей работы я доволен.

Параллельно разобрался c git, пройдя обучение здесь https://learngitbranching.js.org/?locale=ru_RU 

Выполнение задания начал с экспериментов в ноутбуке. Там я написал пайплайн для подготовки данных 
(спойлер: там абсолютно чистые данные, которые не требуют предобработки). 
Там же сделал отчет на основе pandas_proffiling, вложен в ../src/reports/ и генератор синтетических данных.
Решил не пользоватсья Faker, а сделать свой. Идея заключается в расчете для каждого столбца среднего и дисперсии
и сэмплировании данных из нормльного распределения на основе этих параметров.
Итого: 2 + 1 + 3 = 6 балла

Дальше проект был создан на основе CookieCutter, имеет модульную структуру, скрипты расположены
по разным папкам.
Итого: 2 балла

Изначально использовал и парсеры и логгеры, потом понял, что запускать скрипт с командой из консоли по кд никто не захочет
и сделал yaml конфигурацию. Где можно использовал датаклассы, очень полезная штука, взял на вооружение
Итого: 2 + 3 = 5 баллов

Написал тесты как на отдельные модули, в том числе и на генератор синтетических данных, так и на весь пайплайн
Итого: 3 балла

Реализовал свой трансформер, который выкидывает ненужные фичи из корпуса данных
Итого: 3 балла

Модель обучена, и в описании к дз написано как это делать
Итого: 3 балла

Использовал Hydra, в принципе удобная штука
Итого: 3 балла

Присутсвует возможность получить предсказания на основе обученной модели:
Итого 3 балла

Описал в пулл реквесте основные решения своей работы
Итого: 2 балла

Есть ветка homework1, код лежит в папке ml_project
Итого: 1 + 2 = 3 балла

+ 1 балл за самооценку :)
Всего: 34 балла

В целом, свою работу оцениваю положительно. Все основные поставленные задачи были выполнены,
не делал только настройку CI на основе github actions. К функциям и классам написаны doc-strings,
код был скорректирован по итогам прогона через pylint. Работа строилась по TDD: сначала писал тесты, потом делал реализацию.
К такому подходу непросто привыкнуть, но за то потом все работает как часы - это очень круто.





Описание ДЗ
------------
Всем привет! 

Выполнение первого домашнего задания оценивается в 30 баллов. 

Вам потребуется сделать "production ready" проект для решения задачи классификации, то есть написать код для обучения и предикта, покрыть его тестами, обучить с помощью него модельку.

Для обучения модели, можете использовать датасет https://www.kaggle.com/ronitf/heart-disease-uci, либо иной небольшой датасет для классификации(если используете другой, то опишите какой и как его получить в readme)

Пример подобного разбирали на паре https://github.com/made-ml-in-prod-2021/ml_project_example, не нужно отсюда копировать=)

Критерии (указаны максимальные баллы, по каждому критерию ревьюер может поставить баллы частично): 
-2) Назовите ветку homework1 (1 балл)
-1) положите код в папку ml_project
0) В описании к пулл реквесту описаны основные "архитектурные" и тактические решения, которые сделаны в вашей работе. В общем, описание что именно вы сделали и для чего, чтобы вашим ревьюерам было легче понять ваш код. (2 балла)

1) Выполнение EDA, закоммитьте ноутбук в папку с ноутбуками (2 баллов)
Вы так же можете построить в ноутбуке прототип(если это вписывается в ваш стиль работы)
Можете использовать не ноутбук, а скрипт, который сгенерит отчет, закоммитьте и скрипт и отчет (за это + 1 балл)

2) Проект имеет модульную структуру(не все в одном файле =) ) (2 баллов)

3) использованы логгеры (2 балла)

4) написаны тесты на отдельные модули и на прогон всего пайплайна(3 баллов)

5) Для тестов генерируются синтетические данные, приближенные к реальным (3 баллов)
- можно посмотреть на библиотеки https://faker.readthedocs.io/en/, https://feature-forge.readthedocs.io/en/latest/
- можно просто руками посоздавать данных, собственноручно написанными функциями
как альтернатива, можно закоммитить файл с подмножеством трейна(это не оценивается) 

6) Обучение модели конфигурируется с помощью конфигов в json или yaml, закоммитьте как минимум 2 корректные конфигурации, с помощью которых можно обучить модель (разные модели, стратегии split, preprocessing) (3 балла)

7) Используются датаклассы для сущностей из конфига, а не голые dict (3 балла) 

8) Используйте кастомный трансформер(написанный своими руками) и протестируйте его(3 балла)

9) Обучите модель, запишите в readme как это предлагается (3 балла)

10) напишите функцию predict, которая примет на вход артефакт/ы от обучения, тестовую выборку(без меток) и запишет предикт, напишите в readme как это сделать (3 балла)  

11) Используется hydra  (https://hydra.cc/docs/intro/) (3 балла - доп баллы)

12) Настроен CI(прогон тестов, линтера) на основе github actions  (3 балла - доп баллы (будем проходить дальше в курсе, но если есть желание поразбираться - welcome)
13) Проведите самооценку, опишите, в какое колво баллов по вашему мнению стоит оценить вашу работу и почему (1 балл доп баллы) 


PS: Можно использовать cookiecutter-data-science  https://drivendata.github.io/cookiecutter-data-science/ , но поудаляйте папки, в которые вы не вносили изменения, чтобы не затруднять ревью


Сроки выполнения:
Мягкий дедлайн: 9 мая 23:59
Жесткий дедлайн:  16 мая 23:59 
(небольшие доработки по требованиям ревьюеров можно будет вносить после срока, важно, чтобы основная часть кода была написана до дедлайна)
После мягкого дедлайна все полученные баллы умножаются на 0.65